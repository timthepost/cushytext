---
title: Working With Lume 3 Router Middleware
menu:
  visible: true
  order: 3
---

# {title}

If you run the local server on port 3000 and go to `/api`, you'll see a timestamp. It's
being dynamically generated by a handler in `_server_routes.ts`, which is where the theme
middleware ships.

Have a look at the code that produces it:

```js
import Router from "lume/middlewares/router.ts";

const router = new Router();

router.get("/api", ({ _request }) => {
  const ts = Date.now();
  return new Response(JSON.stringify({ ping: ts }), { status: 200 });
});

export default router;
```

This is imported by the production `_serve.ts` when it serves your 
site on Deno Deploy, and is also loaded by Lume's local server when 
you start it. 

You can set up synchronous or asynchronous handlers for `GET`, `POST`, 
`DELETE` (and whatever else), where you can do I/O with DenoKV or 
other databases, await the return of `fetch()` to pull in content, or 
whatever you'd normally use edge functions for.

This isn't for serving dynamic pages, just for handling things that
are needed to bring interactivity to sites.

That's the gist of it, docs for features that ship by default will
be added as separate entries.
